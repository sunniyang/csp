# csp
CSP框架介绍
CSP（common service platform通用服务框架），是一套微服务开发框架。主要功能如下：
1、服务注册与发现
2、配置中心
3、日志中心
4、无状态多机容错
5、故障转移
6、负载均衡和流量控制
7、RPC调用
8、全异步通信
9、统一的开发规范

CSP框架由libcsp架包、4个服务（DomainServer、ConfigServer、LogServer、ApiServer）以及一个系统DB（服务注册和配置信息）组成。
libcsp架包，在开发业务服务时，必须被业务服务依赖。
DomainServer是域控制器，是最重要的服务。CSP微服务以“域”为隔离单位进行管理，一个域包含了若干台物理主机以及若干个微服务，每个微服务会有若干个完全对等的副本。域控制器是一个域里最先启动的服务，负责读取系统DB里所有的服务信息，加载到内存，以供后续其他服务查询。这些信息包括当前注册有哪些服务，每个服务分别部署在哪些主机上，每个服务是否处于可用状态，流量权重是多少。
ConfigServer是配置中心服务器，在域控制器启动之后启动。配置服务器管理着域内所有服务的配置信息，供各个业务查询。
LogServer是日志服务。CSP内的日志可以分为两种日志，无名日志和命名日志。无名日志属于滚动日志，最大限定100M，超过100M会自动覆盖最原先的日志记录。命名日志在代码编写时可以指定一个名字，属于按天日志。按天日志会以日期为单位生成不同的日志文件，且不会被覆盖。按天日志会在服务本地保存，同时也会被统一传送到日志服务器，以方便垮机器统计。
ApiServer是接入服务器，是一个域内微服务对外提供服务的唯一出口，同时也承担了向后端微服务分发请求和收集响应的职责。

每一个具体的业务服务，都由两个工程组成：XxxServer（服务实现）和XxxServerProxy（服务代理）。服务实现是实现具体业务逻辑的地方，服务代理则封装了服务实现的调用接口，被调用方依赖。同时服务代理也是定义该服务消息格式的地方。

CSP服务支持二进制协议和HTTP协议两种接口

每个服务由一个Server和多个Service组成。Service内可以有多个业务接口。
（未完待续）
